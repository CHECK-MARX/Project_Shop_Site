<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>æ–°è¦ç™»éŒ² - Vulnerable Shop</title>
  <link rel="stylesheet" href="/styles.css">
</head>
<body>
  <header class="navbar">
    <div class="nav-brand"><h1>ğŸ›’ Vulnerable Shop</h1></div>
    <div class="nav-links">
      <a href="/">ãƒ›ãƒ¼ãƒ </a>
      <a href="/login.html">ãƒ­ã‚°ã‚¤ãƒ³</a>
      <a href="/products.html">å•†å“</a>
    </div>
  </header>
  <main class="cart-section" style="max-width:520px;">
    <h2>æ–°è¦ç™»éŒ²</h2>
    <div id="msg"></div>
    <form id="f" class="cart-items">
      <div class="form-group"><label>ãƒ¦ãƒ¼ã‚¶ãƒ¼å</label><input id="u" required></div>
      <div class="form-group"><label>ãƒ¡ãƒ¼ãƒ«</label><input id="e" required></div>
      <div class="form-group"><label>ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰</label><input id="p" required></div>
      <button class="btn btn-primary" type="submit">ç™»éŒ²</button>
    </form>
  </main>
  <script>
    const msg = document.getElementById('msg');
    function show(m,t='info'){ msg.innerHTML = `<div class="alert alert-${t}">${m}</div>` }
    document.getElementById('f').addEventListener('submit', async (e)=>{
      e.preventDefault();
      const payload = { username: u.value, email: e.value, password: p.value };
      try{
        const r = await fetch('/api/register', { method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify(payload)});
        const d = await r.json();
        if(!r.ok) throw new Error(d.error||'ç™»éŒ²ã«å¤±æ•—ã—ã¾ã—ãŸ');
        show('ç™»éŒ²æˆåŠŸï¼ãƒ­ã‚°ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ã«ç§»å‹•ã—ã¾ã™', 'success');
        setTimeout(()=>location.href='/login.html', 800);
      }catch(err){ show('ç™»éŒ²å¤±æ•—: '+err.message, 'danger'); }
    });
  </script>
</body>
</html>

