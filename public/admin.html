<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <title>管理者パネル</title>
  <link rel="stylesheet" href="./styles.css"/>

  <!-- 見た目微調整（このページ専用の軽量CSS） -->
  <style>
    /* テーブル */
    .adm-table{width:100%;border-collapse:separate;border-spacing:0 10px}
    .adm-table th,.adm-table td{padding:10px 12px;border-bottom:1px solid rgba(255,255,255,.06)}
    .adm-table thead th{border-bottom:1px solid rgba(255,255,255,.14);color:#cdd7ea;font-weight:700}
    .adm-row{background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.08);border-radius:12px}
    .adm-row td:first-child,.adm-row th:first-child{border-top-left-radius:12px;border-bottom-left-radius:12px}
    .adm-row td:last-child,.adm-row th:last-child{border-top-right-radius:12px;border-bottom-right-radius:12px}

    /* 入力 */
    .adm-inp{
      height:34px;padding:6px 10px;border-radius:8px;border:1px solid #2c3a59;
      background:#101829;color:#e9edf6;outline:none;min-width:140px
    }
    .adm-inp:focus{border-color:#2d7ef7;box-shadow:0 0 0 3px rgba(45,126,247,.18)}

    /* ボタン（小さめ・詰め配置） */
    .btn-xs{height:30px;padding:0 10px;font-size:.9rem;border-radius:8px}
    .btn-ghost{background:#14203a;border:1px solid #2b3a5a;color:#e9edf6}
    .btn-ghost:hover{filter:brightness(1.08)}
    .btn-danger.btn-xs{background:#d05860}
    .btn-warning.btn-xs{background:#d6a33b}
    .btn-group{display:flex;gap:8px;align-items:center;flex-wrap:wrap}

    /* セクション余白 */
    .admin-wrap{max-width:1100px;margin:24px auto}
    .admin-section{margin:18px 0}
    .admin-section h2{margin:0 0 10px 2px}
    .admin-content{padding:16px;border-radius:16px;border:1px solid rgba(255,255,255,.08);
      background:linear-gradient(180deg,rgba(29,37,61,.6),rgba(18,24,42,.6))
    }

    /* バックアップテーブル */
    .bk-name{font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace}
    .bk-ops .btn{min-width:74px}
  </style>
</head>
<body>
<header>
  <nav class="navbar">
    <div class="nav-brand"><h1>🛠 管理者パネル</h1></div>
    <div class="nav-links">
      <a href="./index.html">ホーム</a>
      <a href="./products.html">商品</a>
      <a href="./cart.html">カート</a>
      <button id="logoutBtn" class="btn btn-danger btn-xs">ログアウト</button>
    </div>
  </nav>
</header>

<main class="admin-wrap">
  <div style="margin:8px 0;">
    <span id="adminHello" class="user-pill" style="display:inline-block">管理者でログイン中: root</span>
  </div>

  <!-- Users -->
  <section class="admin-section">
    <h2>ユーザー一覧</h2>
    <div class="admin-content">
      <table class="adm-table">
        <thead>
          <tr>
            <th style="width:64px">ID</th>
            <th style="width:140px">ユーザー名</th>
            <th style="min-width:240px">メール</th>
            <th style="min-width:170px">パスワード</th>
            <th style="width:90px">権限</th>
            <th style="width:180px">作成日時</th>
            <th style="width:170px">操作</th>
          </tr>
        </thead>
        <tbody id="userTbody"></tbody>
      </table>
      <div style="margin-top:10px;color:#9fb3ff;font-size:12px">※ root は削除・パスワード変更不可</div>
    </div>
  </section>

  <!-- Backups -->
  <section class="admin-section">
    <h2>DB バックアップ</h2>
    <div class="admin-content">
      <div style="display:flex;gap:10px;align-items:center;margin-bottom:12px;flex-wrap:wrap">
        <input id="backupName" class="adm-inp" type="text" placeholder="任意の名前 (英数/.-_)">
        <button id="backupMake" class="btn btn-info btn-xs">DBバックアップ作成</button>
      </div>

      <table class="adm-table">
        <thead>
          <tr>
            <th>ファイル名</th>
            <th style="text-align:right;width:120px">サイズ</th>
            <th style="width:220px">作成日時</th>
            <th style="width:190px">操作</th>
          </tr>
        </thead>
        <tbody id="backupTbody"></tbody>
      </table>
      <div id="backupEmpty" style="margin-top:6px;display:none;color:#9fb3ff">バックアップはまだありません。</div>
    </div>
  </section>
</main>

<footer>
  <p>&copy; Vulnerable Shop (教育目的)</p>
</footer>

<!-- 共通 -->
<script src="./script.js"></script>
<script src="./js/auth.js" defer></script>
<!-- admin 専用 -->
<script src="./js/admin.js" defer></script>
</body>
</html>
