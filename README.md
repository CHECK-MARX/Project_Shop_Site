# Vulnerable Shopping Site - 教育用脆弱性ショッピングサイト

⚠️ **警告**: このサイトはセキュリティ教育のために意図的に脆弱性を含んでいます。本番環境では絶対に使用しないでください。

## 概要

このプロジェクトは、Webアプリケーションセキュリティの学習を目的として、意図的に脆弱性を含んだショッピングサイトです。CVE（Common Vulnerabilities and Exposures）のCritical、High、Mediumレベルの脆弱性を実装しています。

## 含まれている脆弱性

### Critical レベル (CVE-2023-XXXX)

1. **SQLインジェクション (CVE-2023-1111)**
   - ログイン機能でのSQLインジェクション
   - ユーザー登録でのSQLインジェクション
   - 商品検索でのSQLインジェクション
   - 商品詳細取得でのSQLインジェクション

2. **コマンドインジェクション (CVE-2023-5555)**
   - バックアップ機能でのコマンドインジェクション
   - `child_process.exec()`の不適切な使用

3. **認証バイパス (CVE-2023-0001)**
   - 弱いJWTシークレット
   - ハードコードされたパスワード

### High レベル (CVE-2023-YYYY)

4. **クロスサイトスクリプティング (XSS) (CVE-2023-7777)**
   - 商品表示でのXSS
   - 検索結果でのXSS
   - カート表示でのXSS

5. **クロスサイトリクエストフォージェリ (CSRF) (CVE-2023-8888)**
   - 注文機能でのCSRF
   - CSRFトークンなし

6. **パストラバーサル (CVE-2023-6666)**
   - ファイル取得機能でのパストラバーサル

### Medium レベル (CVE-2023-ZZZZ)

7. **情報漏洩 (CVE-2023-9999)**
   - デバッグエンドポイント
   - 環境変数の露出
   - ユーザーパスワードの露出

8. **セキュリティヘッダーの欠如 (CVE-2023-1234)**
   - CORS設定の不適切な設定
   - セキュリティヘッダーの欠如

9. **レート制限の欠如 (CVE-2023-5678)**
   - ブルートフォース攻撃への対策なし

10. **セッション管理の問題 (CVE-2023-9012)**
    - 弱いセッションシークレット
    - 不適切なクッキー設定

## インストールと実行

### 前提条件
- Node.js (v14以上)
- npm

### セットアップ

1. リポジトリをクローン
```bash
git clone https://github.com/CHECK-MARX/vulnerable-shopping-site.git
cd vulnerable-shopping-site
```

2. 依存関係をインストール
```bash
npm install
```

3. サーバーを起動
```bash
npm start
```

4. ブラウザで `http://localhost:3000` にアクセス

## 使用方法

### デフォルトアカウント
- **管理者**: username: `admin`, password: `admin123`
- **一般ユーザー**: username: `user1`, password: `password123`

### 脆弱性テスト

サイトには脆弱性テスト用のツールが含まれています：

1. **SQLインジェクションテスト**
   - 検索ボックスに `' OR '1'='1` を入力
   - ログイン画面で `admin' --` をユーザー名に入力

2. **XSSテスト**
   - 検索ボックスに `<script>alert('XSS')</script>` を入力

3. **パストラバーサルテスト**
   - ファイル取得機能で `../../../etc/passwd` を入力

## セキュリティ対策

このサイトの脆弱性を修正するには：

1. **入力検証とサニタイゼーション**
   - すべてのユーザー入力を検証
   - SQLクエリでパラメータ化クエリを使用
   - 出力エンコーディングを実装

2. **認証とセッション管理**
   - 強力なパスワードポリシー
   - 適切なJWTシークレット
   - セキュアなセッション設定

3. **セキュリティヘッダー**
   - CORSの適切な設定
   - セキュリティヘッダーの追加
   - レート制限の実装

4. **アクセス制御**
   - CSRFトークンの実装
   - 適切な認可チェック
   - デバッグ情報の無効化

## 教育目的での使用

このプロジェクトは以下の目的で使用できます：

- Webアプリケーションセキュリティの学習
- 脆弱性の理解と対策方法の習得
- セキュリティテストの実践
- セキュアコーディングの学習

## 免責事項

このソフトウェアは教育目的でのみ提供されています。作者は、このソフトウェアの使用によって生じるいかなる損害についても責任を負いません。本番環境では絶対に使用しないでください。

## ライセンス

MIT License

## 貢献

プルリクエストやイシューの報告を歓迎します。ただし、このプロジェクトは教育目的であることを理解してください。

## 連絡先

- GitHub: [@CHECK-MARX](https://github.com/CHECK-MARX)
- プロジェクト: [Vulnerable Shopping Site](https://github.com/CHECK-MARX/vulnerable-shopping-site)
